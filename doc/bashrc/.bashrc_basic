#!/bin/bash
#--------------------------------------
# CUSTOM .BASHRC SETTINGS
#--------------------------------------
# Local Variables

# Colors
reset="0"
red="31"
green="32"
yellow="33"
blue="34"
magenta="35"
cyan="36"

lightGray="37"
darkGray="90"

lightRed="91"
lightGreen="92"
lightYellow="93"
lightBlue="94"
lightMagenta="95"
lightCyan="96"

white="97"

# Custom Prompt
psColor1="\[\e[2;${green}m\]"
psColor2="\[\e[0;${lightBlue}m\]"
psColor3="\[\e[0;${lightRed}m\]"
psColor4="\[\e[0;${reset}m\]"

#--------------------------------------
# Functions

# Read enviroment variables which is named ${PROMPT_COMMAND_*}
dispatch() {
	export EXIT_STATUS="$?" # error code of latest command
	local f
	for f in ${!PROMPT_COMMAND_*}; do
		eval "${!f}"
	done
	unset f
}

#--------------------------------------
# Enviroment Variables

# Location for dotfiles repo.
# Only for .bashrc. Do NOT use this variable on other scripts.
export DOTFILES="${HOME}/wsl-dotfiles"

# Editor for general usage
export EDITOR=vim

# Pager for manual
export MANPAGER="sh -c 'col -bx | bat -l man -p --pager=\"less -FR\"'"

# PROMT_COMMAND
export PROMPT_COMMAND="dispatch"
export PROMPT_COMMAND_PS1="__git_ps1 '${psColor1}WSL${psColor4}:${psColor2}\W${psColor3}' '${psColor4}\\\$ '"

# Node Version Manager
export NVM_DIR="${DOTFILES}/.cache/.nvm"

#--------------------------------------
# Import configurations

# Node Version Manager
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# fzf
[ -s ${DOTFILES}/doc/bashrc/.bashrc_fzf ] && source ${DOTFILES}/doc/bashrc/.bashrc_fzf
# vivid
[ -s ${DOTFILES}/doc/bashrc/.bashrc_vivid ] && source ${DOTFILES}/doc/bashrc/.bashrc_vivid

#--------------------------------------
# Aliases
alias gst="git status"

#--------------------------------------
# Init commands
